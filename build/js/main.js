"use strict";

(function () {
  document.addEventListener("DOMContentLoaded", function () {
    var slides = document.querySelectorAll(".race__item");
    var slideMoveLeft = document.querySelector(".race__nav-left");
    var slideMoveRight = document.querySelector(".race__nav-right");
    var slideCounter = document.querySelector(".race__nav-counter");
    var currentSLide = 0;

    // slides.forEach((slide, i) =>{
    //
    // })

    function setSlider(slides) {}
    function startCountdown(endTime) {
      var daysEls = document.querySelectorAll(".timer__days-item");
      var hoursEls = document.querySelectorAll(".timer__hours-item");
      var minutesEls = document.querySelectorAll(".timer__minutes-item");
      function updateTimer() {
        var now = new Date().getTime();
        var timeLeft = endTime - now;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          updateDigits(daysEls, "00");
          updateDigits(hoursEls, "00");
          updateDigits(minutesEls, "00");
          return;
        }
        var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        var hours = Math.floor(timeLeft / (1000 * 60 * 60) % 24);
        var minutes = Math.floor(timeLeft / (1000 * 60) % 60);
        updateDigits(daysEls, String(days).padStart(2, "0"));
        updateDigits(hoursEls, String(hours).padStart(2, "0"));
        updateDigits(minutesEls, String(minutes).padStart(2, "0"));
      }
      function updateDigits(elements, value) {
        elements[0].textContent = value[0];
        elements[1].textContent = value[1];
      }
      updateTimer();
      var timerInterval = setInterval(updateTimer, 60000);
    }
    var now = new Date();
    var endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59).getTime();
    startCountdown(endOfMonth);
    function startSmoke(carSelector, smokeClass, maxCount, interval, delay, fadeTime, removeDelay) {
      var extraClass = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : '';
      var activeClass = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;
      var car = document.querySelector(carSelector);
      function createSmoke() {
        if (activeClass) {
          if (!car || !car.parentElement.parentElement.classList.contains("_active")) return;
        }
        if (car.querySelectorAll(".".concat(smokeClass).concat(extraClass ? ".".concat(extraClass) : '')).length < maxCount) {
          var smoke = document.createElement('div');
          smoke.classList.add(smokeClass);
          if (extraClass) smoke.classList.add(extraClass);
          car.appendChild(smoke);
          setTimeout(function () {
            return smoke.classList.add("_opacity");
          }, fadeTime);
          setTimeout(function () {
            return smoke.remove();
          }, fadeTime + removeDelay);
        }
      }
      createSmoke();
      setTimeout(createSmoke, delay);
      setInterval(function () {
        createSmoke();
        setTimeout(createSmoke, delay);
      }, interval);
    }
    // startSmoke('.race__bolid-car', 'race__bolid-smoke-front', 4, 900, 500, 100, 800, "", true);
    // startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 8, 900, 500, 100, 800, "", true);
    // startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 4, 900, 500, 100, 800, "_large", true);
    // startSmoke('.welcome__pers-smoke-front', 'front-before', 4, 900, 500, 100, 800, "", false);
    // startSmoke('.welcome__pers-smoke-back', 'front-before', 4, 900, 500, 100, 800, "", false);

    startSmoke('.race__bolid-car', 'race__bolid-smoke-front', 4, 900, 500, 200, 1600, "", true);
    startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 8, 900, 500, 200, 1600, "", true);
    startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 4, 900, 500, 200, 1600, "_large", true);
    startSmoke('.welcome__pers-smoke-front', 'front-before', 4, 900, 500, 200, 1600, "", false);
    startSmoke('.welcome__pers-smoke-back', 'front-before', 4, 900, 500, 200, 1600, "", false);
  });
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlTW92ZUxlZnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVNb3ZlUmlnaHQiLCJzbGlkZUNvdW50ZXIiLCJjdXJyZW50U0xpZGUiLCJzZXRTbGlkZXIiLCJzdGFydENvdW50ZG93biIsImVuZFRpbWUiLCJkYXlzRWxzIiwiaG91cnNFbHMiLCJtaW51dGVzRWxzIiwidXBkYXRlVGltZXIiLCJub3ciLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVMZWZ0IiwiY2xlYXJJbnRlcnZhbCIsInRpbWVySW50ZXJ2YWwiLCJ1cGRhdGVEaWdpdHMiLCJkYXlzIiwiTWF0aCIsImZsb29yIiwiaG91cnMiLCJtaW51dGVzIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJlbGVtZW50cyIsInZhbHVlIiwidGV4dENvbnRlbnQiLCJzZXRJbnRlcnZhbCIsImVuZE9mTW9udGgiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwic3RhcnRTbW9rZSIsImNhclNlbGVjdG9yIiwic21va2VDbGFzcyIsIm1heENvdW50IiwiaW50ZXJ2YWwiLCJkZWxheSIsImZhZGVUaW1lIiwicmVtb3ZlRGVsYXkiLCJleHRyYUNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJjYXIiLCJjcmVhdGVTbW9rZSIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImxlbmd0aCIsInNtb2tlIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFDLFlBQVc7RUFDUkEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFLO0lBQy9DLElBQU1DLE1BQU0sR0FBR0YsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUM7SUFDdkQsSUFBTUMsYUFBYSxH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QUM5QlQsV0FBVyxDQUFDLFlBQU07UUFDZGUsV0FBVyxFQUFFO1FBQ2JTLFVBQVUsQ0FBQ1QsV0FBVyxFQUFFTixLQUFLLENBQUM7TUFDbEMsQ0FBQyxFQUFFRCxRQUFRLENBQUM7SUFDaEI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOztJQUdBSixVQUFVLENBQUMsa0JBQWtCLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDO0lBQzNGQSxVQUFVLENBQUMsa0JBQWtCLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDO0lBQzFGQSxVQUFVLENBQUMsa0JBQWtCLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDO0lBQ2hHQSxVQUFVLENBQUMsNEJBQTRCLEVBQUUsY0FBYyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQztJQUMzRkEsVUFBVSxDQUFDLDJCQUEyQixFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUM7RUFFOUYsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxHQUFHIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCl7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT57XG4gICAgICAgIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmFjZV9faXRlbVwiKVxuICAgICAgICBjb25zdCBzbGlkZU1vdmVMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yYWNlX19uYXYtbGVmdFwiKVxuICAgICAgICBjb25zdCBzbGlkZU1vdmVSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFjZV9fbmF2LXJpZ2h0XCIpXG4gICAgICAgIGNvbnN0IHNsaWRlQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFjZV9fbmF2LWNvdW50ZXJcIilcblxuICAgICAgICBsZXQgY3VycmVudFNMaWRlID0gMFxuXG4gICAgICAgIC8vIHNsaWRlcy5mb3JFYWNoKChzbGlkZSwgaSkgPT57XG4gICAgICAgIC8vXG4gICAgICAgIC8vIH0pXG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U2xpZGVyKHNsaWRlcyl7XG5cbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0Q291bnRkb3duKGVuZFRpbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRheXNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19kYXlzLWl0ZW1cIik7XG4gICAgICAgICAgICBjb25zdCBob3Vyc0VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJfX2hvdXJzLWl0ZW1cIik7XG4gICAgICAgICAgICBjb25zdCBtaW51dGVzRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aW1lcl9fbWludXRlcy1pdGVtXCIpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lcigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lTGVmdCA9IGVuZFRpbWUgLSBub3c7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZUxlZnQgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEaWdpdHMoZGF5c0VscywgXCIwMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGlnaXRzKGhvdXJzRWxzLCBcIjAwXCIpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEaWdpdHMobWludXRlc0VscywgXCIwMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCAqIDYwKSkgJSAyNCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCkpICUgNjApO1xuXG4gICAgICAgICAgICAgICAgdXBkYXRlRGlnaXRzKGRheXNFbHMsIFN0cmluZyhkYXlzKS5wYWRTdGFydCgyLCBcIjBcIikpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZURpZ2l0cyhob3Vyc0VscywgU3RyaW5nKGhvdXJzKS5wYWRTdGFydCgyLCBcIjBcIikpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZURpZ2l0cyhtaW51dGVzRWxzLCBTdHJpbmcobWludXRlcykucGFkU3RhcnQoMiwgXCIwXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGlnaXRzKGVsZW1lbnRzLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzWzBdLnRleHRDb250ZW50ID0gdmFsdWVbMF07XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbMV0udGV4dENvbnRlbnQgPSB2YWx1ZVsxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlVGltZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVUaW1lciwgNjAwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgZW5kT2ZNb250aCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSArIDEsIDAsIDIzLCA1OSkuZ2V0VGltZSgpO1xuXG4gICAgICAgIHN0YXJ0Q291bnRkb3duKGVuZE9mTW9udGgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0U21va2UoY2FyU2VsZWN0b3IsIHNtb2tlQ2xhc3MsIG1heENvdW50LCBpbnRlcnZhbCwgZGVsYXksIGZhZGVUaW1lLCByZW1vdmVEZWxheSwgZXh0cmFDbGFzcyA9ICcnLCBhY3RpdmVDbGFzcyA9IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zdCBjYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhclNlbGVjdG9yKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU21va2UoKSB7XG4gICAgICAgICAgICAgICAgaWYoYWN0aXZlQ2xhc3Mpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNhciB8fCAhY2FyLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJfYWN0aXZlXCIpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYXIucXVlcnlTZWxlY3RvckFsbChgLiR7c21va2VDbGFzc30ke2V4dHJhQ2xhc3MgPyBgLiR7ZXh0cmFDbGFzc31gIDogJyd9YCkubGVuZ3RoIDwgbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21va2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgc21va2UuY2xhc3NMaXN0LmFkZChzbW9rZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhQ2xhc3MpIHNtb2tlLmNsYXNzTGlzdC5hZGQoZXh0cmFDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIGNhci5hcHBlbmRDaGlsZChzbW9rZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc21va2UuY2xhc3NMaXN0LmFkZChcIl9vcGFjaXR5XCIpLCBmYWRlVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc21va2UucmVtb3ZlKCksIGZhZGVUaW1lICsgcmVtb3ZlRGVsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNyZWF0ZVNtb2tlKCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNyZWF0ZVNtb2tlLCBkZWxheSk7XG4gICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlU21va2UoKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNyZWF0ZVNtb2tlLCBkZWxheSk7XG4gICAgICAgICAgICB9LCBpbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RhcnRTbW9rZSgnLnJhY2VfX2JvbGlkLWNhcicsICdyYWNlX19ib2xpZC1zbW9rZS1mcm9udCcsIDQsIDkwMCwgNTAwLCAxMDAsIDgwMCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgIC8vIHN0YXJ0U21va2UoJy5yYWNlX19ib2xpZC1jYXInLCAncmFjZV9fYm9saWQtc21va2UtYmFjaycsIDgsIDkwMCwgNTAwLCAxMDAsIDgwMCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgIC8vIHN0YXJ0U21va2UoJy5yYWNlX19ib2xpZC1jYXInLCAncmFjZV9fYm9saWQtc21va2UtYmFjaycsIDQsIDkwMCwgNTAwLCAxMDAsIDgwMCwgXCJfbGFyZ2VcIiwgdHJ1ZSk7XG4gICAgICAgIC8vIHN0YXJ0U21va2UoJy53ZWxjb21lX19wZXJzLXNtb2tlLWZyb250JywgJ2Zyb250LWJlZm9yZScsIDQsIDkwMCwgNTAwLCAxMDAsIDgwMCwgXCJcIiwgZmFsc2UpO1xuICAgICAgICAvLyBzdGFydFNtb2tlKCcud2VsY29tZV9fcGVycy1zbW9rZS1iYWNrJywgJ2Zyb250LWJlZm9yZScsIDQsIDkwMCwgNTAwLCAxMDAsIDgwMCwgXCJcIiwgZmFsc2UpO1xuXG5cbiAgICAgICAgc3RhcnRTbW9rZSgnLnJhY2VfX2JvbGlkLWNhcicsICdyYWNlX19ib2xpZC1zbW9rZS1mcm9udCcsIDQsIDkwMCwgNTAwLCAyMDAsIDE2MDAsIFwiXCIsIHRydWUpO1xuICAgICAgICBzdGFydFNtb2tlKCcucmFjZV9fYm9saWQtY2FyJywgJ3JhY2VfX2JvbGlkLXNtb2tlLWJhY2snLCA4LCA5MDAsIDUwMCwgMjAwLCAxNjAwLCBcIlwiLCB0cnVlKTtcbiAgICAgICAgc3RhcnRTbW9rZSgnLnJhY2VfX2JvbGlkLWNhcicsICdyYWNlX19ib2xpZC1zbW9rZS1iYWNrJywgNCwgOTAwLCA1MDAsIDIwMCwgMTYwMCwgXCJfbGFyZ2VcIiwgdHJ1ZSk7XG4gICAgICAgIHN0YXJ0U21va2UoJy53ZWxjb21lX19wZXJzLXNtb2tlLWZyb250JywgJ2Zyb250LWJlZm9yZScsIDQsIDkwMCwgNTAwLCAyMDAsIDE2MDAsIFwiXCIsIGZhbHNlKTtcbiAgICAgICAgc3RhcnRTbW9rZSgnLndlbGNvbWVfX3BlcnMtc21va2UtYmFjaycsICdmcm9udC1iZWZvcmUnLCA0LCA5MDAsIDUwMCwgMjAwLCAxNjAwLCBcIlwiLCBmYWxzZSk7XG5cbiAgICB9KVxufSkoKSJdfQ==
