"use strict";

(function () {
  document.addEventListener("DOMContentLoaded", function () {
    var slides = document.querySelectorAll(".race__item");
    var slideMoveLeft = document.querySelector(".race__nav-left");
    var slideMoveRight = document.querySelector(".race__nav-right");
    var slideCounter = document.querySelector(".race__nav-counter");
    var currentSLide = 0;

    // slides.forEach((slide, i) =>{
    //
    // })

    function setSlider(slides) {}
    function startCountdown(endTime) {
      var daysEls = document.querySelectorAll(".timer__days-item");
      var hoursEls = document.querySelectorAll(".timer__hours-item");
      var minutesEls = document.querySelectorAll(".timer__minutes-item");
      function updateTimer() {
        var now = new Date().getTime();
        var timeLeft = endTime - now;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          updateDigits(daysEls, "00");
          updateDigits(hoursEls, "00");
          updateDigits(minutesEls, "00");
          return;
        }
        var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        var hours = Math.floor(timeLeft / (1000 * 60 * 60) % 24);
        var minutes = Math.floor(timeLeft / (1000 * 60) % 60);
        updateDigits(daysEls, String(days).padStart(2, "0"));
        updateDigits(hoursEls, String(hours).padStart(2, "0"));
        updateDigits(minutesEls, String(minutes).padStart(2, "0"));
      }
      function updateDigits(elements, value) {
        elements[0].textContent = value[0];
        elements[1].textContent = value[1];
      }
      updateTimer();
      var timerInterval = setInterval(updateTimer, 60000);
    }
    var now = new Date();
    var endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59).getTime();
    startCountdown(endOfMonth);
    function startSmoke(carSelector, smokeClass, maxCount, interval, delay, fadeTime, removeDelay) {
      var extraClass = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : '';
      var activeClass = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;
      var car = document.querySelector(carSelector);
      function createSmoke() {
        if (activeClass) {
          if (!car || !car.parentElement.parentElement.classList.contains("_active")) return;
        }
        if (car.querySelectorAll(".".concat(smokeClass).concat(extraClass ? ".".concat(extraClass) : '')).length < maxCount) {
          var smoke = document.createElement('div');
          smoke.classList.add(smokeClass);
          if (extraClass) smoke.classList.add(extraClass);
          car.appendChild(smoke);
          setTimeout(function () {
            return smoke.classList.add("_opacity");
          }, fadeTime);
          setTimeout(function () {
            return smoke.remove();
          }, fadeTime + removeDelay);
        }
      }
      createSmoke();
      setTimeout(createSmoke, delay);
      setInterval(function () {
        createSmoke();
        setTimeout(createSmoke, delay);
      }, interval);
    }
    startSmoke('.race__bolid-car', 'race__bolid-smoke-front', 2, 900, 500, 100, 800, "", true);
    startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 4, 900, 500, 100, 800, "", true);
    startSmoke('.race__bolid-car', 'race__bolid-smoke-back', 2, 900, 500, 100, 800, "_large", true);
    startSmoke('.welcome__pers-smoke-front', 'front-before', 2, 900, 500, 100, 800, "", false);
    startSmoke('.welcome__pers-smoke-back', 'front-before', 2, 900, 500, 100, 800, "", false);
  });
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlTW92ZUxlZnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVNb3ZlUmlnaHQiLCJzbGlkZUNvdW50ZXIiLCJjdXJyZW50U0xpZGUiLCJzZXRTbGlkZXIiLCJzdGFydENvdW50ZG93biIsImVuZFRpbWUiLCJkYXlzRWxzIiwiaG91cnNFbHMiLCJtaW51dGVzRWxzIiwidXBkYXRlVGltZXIiLCJub3ciLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVMZWZ0IiwiY2xlYXJJbnRlcnZhbCIsInRpbWVySW50ZXJ2YWwiLCJ1cGRhdGVEaWdpdHMiLCJkYXlzIiwiTWF0aCIsImZsb29yIiwiaG91cnMiLCJtaW51dGVzIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJlbGVtZW50cyIsInZhbHVlIiwidGV4dENvbnRlbnQiLCJzZXRJbnRlcnZhbCIsImVuZE9mTW9udGgiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwic3RhcnRTbW9rZSIsImNhclNlbGVjdG9yIiwic21va2VDbGFzcyIsIm1heENvdW50IiwiaW50ZXJ2YWwiLCJkZWxheSIsImZhZGVUaW1lIiwicmVtb3ZlRGVsYXkiLCJleHRyYUNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJjYXIiLCJjcmVhdGVTbW9rZSIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImxlbmd0aCIsInNtb2tlIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFDLFlBQVc7RUFDUkEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFLO0lBQy9DLElBQU1DLE1BQU0sR0FBR0YsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUM7SUFDdkQsSUFBTUMsYUFBYSxH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QUM5QlQsV0FBVyxDQUFDLFlBQU07UUFDZGUsV0FBVyxFQUFFO1FBQ2JTLFVBQVUsQ0FBQ1QsV0FBVyxFQUFFTixLQUFLLENBQUM7TUFDbEMsQ0FBQyxFQUFFRCxRQUFRLENBQUM7SUFDaEI7SUFDQUosVUFBVSxDQUFDLGtCQUFrQixFQUFFLHlCQUF5QixFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQztJQUMxRkEsVUFBVSxDQUFDLGtCQUFrQixFQUFFLHdCQUF3QixFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQztJQUN6RkEsVUFBVSxDQUFDLGtCQUFrQixFQUFFLHdCQUF3QixFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQztJQUMvRkEsVUFBVSxDQUFDLDRCQUE0QixFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUM7SUFDMUZBLFVBQVUsQ0FBQywyQkFBMkIsRUFBRSxjQUFjLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDO0VBRzdGLENBQUMsQ0FBQztBQUNOLENBQUMsR0FBRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpe1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+e1xuICAgICAgICBjb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJhY2VfX2l0ZW1cIilcbiAgICAgICAgY29uc3Qgc2xpZGVNb3ZlTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFjZV9fbmF2LWxlZnRcIilcbiAgICAgICAgY29uc3Qgc2xpZGVNb3ZlUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJhY2VfX25hdi1yaWdodFwiKVxuICAgICAgICBjb25zdCBzbGlkZUNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJhY2VfX25hdi1jb3VudGVyXCIpXG5cbiAgICAgICAgbGV0IGN1cnJlbnRTTGlkZSA9IDBcblxuICAgICAgICAvLyBzbGlkZXMuZm9yRWFjaCgoc2xpZGUsIGkpID0+e1xuICAgICAgICAvL1xuICAgICAgICAvLyB9KVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNsaWRlcihzbGlkZXMpe1xuXG4gICAgICAgIH1cblxuXG5cblxuICAgICAgICBmdW5jdGlvbiBzdGFydENvdW50ZG93bihlbmRUaW1lKSB7XG4gICAgICAgICAgICBjb25zdCBkYXlzRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aW1lcl9fZGF5cy1pdGVtXCIpO1xuICAgICAgICAgICAgY29uc3QgaG91cnNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19ob3Vycy1pdGVtXCIpO1xuICAgICAgICAgICAgY29uc3QgbWludXRlc0VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJfX21pbnV0ZXMtaXRlbVwiKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlVGltZXIoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZUxlZnQgPSBlbmRUaW1lIC0gbm93O1xuXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVMZWZ0IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lckludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGlnaXRzKGRheXNFbHMsIFwiMDBcIik7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURpZ2l0cyhob3Vyc0VscywgXCIwMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGlnaXRzKG1pbnV0ZXNFbHMsIFwiMDBcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcih0aW1lTGVmdCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKCh0aW1lTGVmdCAvICgxMDAwICogNjAgKiA2MCkpICUgMjQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKCh0aW1lTGVmdCAvICgxMDAwICogNjApKSAlIDYwKTtcblxuICAgICAgICAgICAgICAgIHVwZGF0ZURpZ2l0cyhkYXlzRWxzLCBTdHJpbmcoZGF5cykucGFkU3RhcnQoMiwgXCIwXCIpKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVEaWdpdHMoaG91cnNFbHMsIFN0cmluZyhob3VycykucGFkU3RhcnQoMiwgXCIwXCIpKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVEaWdpdHMobWludXRlc0VscywgU3RyaW5nKG1pbnV0ZXMpLnBhZFN0YXJ0KDIsIFwiMFwiKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURpZ2l0cyhlbGVtZW50cywgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1swXS50ZXh0Q29udGVudCA9IHZhbHVlWzBdO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzWzFdLnRleHRDb250ZW50ID0gdmFsdWVbMV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZVRpbWVyKCk7XG4gICAgICAgICAgICBjb25zdCB0aW1lckludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlVGltZXIsIDYwMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGVuZE9mTW9udGggPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCkgKyAxLCAwLCAyMywgNTkpLmdldFRpbWUoKTtcblxuICAgICAgICBzdGFydENvdW50ZG93bihlbmRPZk1vbnRoKTtcblxuICAgICAgICBmdW5jdGlvbiBzdGFydFNtb2tlKGNhclNlbGVjdG9yLCBzbW9rZUNsYXNzLCBtYXhDb3VudCwgaW50ZXJ2YWwsIGRlbGF5LCBmYWRlVGltZSwgcmVtb3ZlRGVsYXksIGV4dHJhQ2xhc3MgPSAnJywgYWN0aXZlQ2xhc3MgPSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgY2FyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJTZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNtb2tlKCkge1xuICAgICAgICAgICAgICAgIGlmKGFjdGl2ZUNsYXNzKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYXIgfHwgIWNhci5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiX2FjdGl2ZVwiKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2FyLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke3Ntb2tlQ2xhc3N9JHtleHRyYUNsYXNzID8gYC4ke2V4dHJhQ2xhc3N9YCA6ICcnfWApLmxlbmd0aCA8IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtb2tlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNtb2tlLmNsYXNzTGlzdC5hZGQoc21va2VDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRyYUNsYXNzKSBzbW9rZS5jbGFzc0xpc3QuYWRkKGV4dHJhQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICBjYXIuYXBwZW5kQ2hpbGQoc21va2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNtb2tlLmNsYXNzTGlzdC5hZGQoXCJfb3BhY2l0eVwiKSwgZmFkZVRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNtb2tlLnJlbW92ZSgpLCBmYWRlVGltZSArIHJlbW92ZURlbGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjcmVhdGVTbW9rZSgpO1xuICAgICAgICAgICAgc2V0VGltZW91dChjcmVhdGVTbW9rZSwgZGVsYXkpO1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVNtb2tlKCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChjcmVhdGVTbW9rZSwgZGVsYXkpO1xuICAgICAgICAgICAgfSwgaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0U21va2UoJy5yYWNlX19ib2xpZC1jYXInLCAncmFjZV9fYm9saWQtc21va2UtZnJvbnQnLCAyLCA5MDAsIDUwMCwgMTAwLCA4MDAsIFwiXCIsIHRydWUpO1xuICAgICAgICBzdGFydFNtb2tlKCcucmFjZV9fYm9saWQtY2FyJywgJ3JhY2VfX2JvbGlkLXNtb2tlLWJhY2snLCA0LCA5MDAsIDUwMCwgMTAwLCA4MDAsIFwiXCIsIHRydWUpO1xuICAgICAgICBzdGFydFNtb2tlKCcucmFjZV9fYm9saWQtY2FyJywgJ3JhY2VfX2JvbGlkLXNtb2tlLWJhY2snLCAyLCA5MDAsIDUwMCwgMTAwLCA4MDAsIFwiX2xhcmdlXCIsIHRydWUpO1xuICAgICAgICBzdGFydFNtb2tlKCcud2VsY29tZV9fcGVycy1zbW9rZS1mcm9udCcsICdmcm9udC1iZWZvcmUnLCAyLCA5MDAsIDUwMCwgMTAwLCA4MDAsIFwiXCIsIGZhbHNlKTtcbiAgICAgICAgc3RhcnRTbW9rZSgnLndlbGNvbWVfX3BlcnMtc21va2UtYmFjaycsICdmcm9udC1iZWZvcmUnLCAyLCA5MDAsIDUwMCwgMTAwLCA4MDAsIFwiXCIsIGZhbHNlKTtcblxuXG4gICAgfSlcbn0pKCkiXX0=
